<%- include('../partials/header.ejs') %>
	<h1>Flight List</h1>
	<table class="table" id="flight-index">
		<thead>
			<th scope="col">Airline</th>
			<th scope="col">Flight #</th>
			<th scope="col">Departure</th>
			<th scope="col">Flight Details</th>
			<th scope="col">Delete</th>
		</thead>
		<tbody>
			<% flights.forEach(function(flight) { 
                    let todayDate = new Date()
                    let flightDate = flight.departs
                    if (todayDate > flightDate) {
                    
                %>
				<tr>
					<td class="departed">
						<%= flight.airline %>
					</td>
					<td class="departed">
						<%= flight.flightNo %>
					</td>
					<td class="departed">
						<%= flight.departs %>
					</td>
					<td><a href="/flights/<%= flight._id %>" class="btn btn-dark" role="button">Details</a></td>
					<td>
						<form action="/flights/<%= flight._id %>?_method=DELETE" method="POST" id="deleteFlight">
							<button type="submit" form="deleteFlight" class="btn btn-danger"><i class="far fa-trash-alt"></i></button>
						</form>
					</td>
				</tr>
				<% } else { %>
					<tr>
						<td>
							<%= flight.airline %>
						</td>
						<td>
							<%= flight.flightNo %>
						</td>
						<td>
							<%= flight.departs %>
						</td>
						<td><a href="/flights/<%= flight._id %>" class="btn btn-dark" role="button">Details</a></td>
						<td>
							<form action="/flights/<%= flight._id %>?_method=DELETE" method="POST" id="deleteFlight">
								<button type="submit" form="deleteFlight" class="btn btn-danger"><i class="far fa-trash-alt"></i></button>
							</form>
						</td>
					</tr>
					<% }}); %>
		</tbody>
	</table>
	<div id="add-flight"> <a href="/flights/new" class="btn btn-dark btn-lg btn-block">Book a Flight</a> </div>
	<%- include('../partials/footer.ejs') %>