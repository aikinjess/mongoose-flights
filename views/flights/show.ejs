<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <title>Flights</title>
  </head>
  <body>
    <%- include('../partials/nav') %>
    <section>
      <div>Airline:</div>
      <div><%= flight.airline %></div>
      <div>Origin:</div>
      <div><%= flight.airport %></div>
      <div>Flight Number:</div>
      <div><%= flight.flightNo %></div>
      <div>Departure Date/Time:</div>
      <div><%= flight.departs %></div>
    </section>
    <h3>Add a Destination</h3>
    <section>
      <form action="/flights/<%= flight._id %>" method="POST">
        <label
          >Airport:
          <select name="airport">
            <option value="DFW">DFW</option>
            <option value="DEN">DEN</option>
            <option value="AUS">AUS</option>
            <option value="SAN">SAN</option>
            <option value="LAX">LAX</option>
          </select> </label
        ><br />
        <label
          >Arrival Date/Time:
          <input type="datetime-local" name="arrival" /> </label
        ><br />
        <input type="submit" value="Update" />
      </form>
    </section>
    <% if (flight.destinations.length) { %>
    <table>
      <thead>
        <tr>
          <th>Airport</th>
          <th>Arrival Date/Time</th>
        </tr>
      </thead>
      <tbody>
        <% flight.destinations.forEach(function(f) { %>
        <tr>
          <td><%= f.airport %></td>
          <td><%= f.arrival %></td>
        </tr>
        <% }); %>
      </tbody>
    </table>
    <% } else { %>
    <h5>No Destinations Yet</h5>
    <% } %>
    <section>
      <form action="/flights/<%= flight._id %>/tickets/new" method="GET">
        <!-- <label
          >Book a ticket!: <input name="seat" required pattern="[A-F][1-9]\d?" />
        </label>
          <input type="text" name="price" /> </label
        ><br />-->
        <input type="submit" value="Get a ticket" />
      </form>
    </section>
    <% if (tickets.length) { %>
    <table>
      <thead>
        <tr>
          <th>Ticket</th>
          <th>Price</th>
        </tr>
      </thead>
      <tbody>
        <% tickets.forEach(function(ticket) { %>
        <tr>
          <td><%= ticket.seat %></td>
          <td><%= ticket.price %></td>
        </tr>
        <% }); %>
      </tbody>
    </table>
    <% } else { %>
    <h5>No Tickets Sold Yet</h5>
    <% } %>
    <div>
        <h2>Add Tickets</h2>
        <form action="/flights/<%=flight._id%>" method="POST" id="add-ticket">
            <label for="seat">Seat</label>
            <input name="seat" class="short-input" >
            <label for="price">Price</label>
            <input type="number" class="short-input" name="price" min=0>
            <input type="submit" value="Add Ticket">
        </form>
    </div>
  </body>
</html>